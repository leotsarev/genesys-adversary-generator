
<!DOCTYPE html>
<head>
   <meta charset="utf-8"/>
  <link rel="stylesheet" href="static/style.css">
  <!--<link rel="stylesheet" href="https://fontlibrary.org/face/bebas" type="text/css"/>
  <link rel="stylesheet" href="https://fontlibrary.org/face/bebusneuebold" type="text/css"/>-->
  <title>Genesys adversary generator</title>
</head>

<body>
  <article>
    <div>
      <div id="card">
        <header>
          <p id="name">{{ _("Name") }}</p>
              {% include 'power_level.svg' %}
        </header> 
        {% include "caracteristics.svg" %} 

        <div id="defense">
          {% include "soak.svg" %}
          {% include "wt.svg" %}
          {% include "st.svg" %}
          {% include "defense.svg" %}
        </div> 
        <p><span class="section">{{ _("Skills:") }} </span><span class="skills">{{ _("None.") }}</span></p>
        <p><span class="section">{{ _("Talents:") }} </span><span class="talents">{{ _("None.") }}</span></p>
        <p><span class="section">{{ _("Abilities:") }} </span><span class="abilities">{{ _("None.") }}</span></p>
        <p><span class="section">{{ _("Weapons:") }} </span><span class="weapons">{{ _("None.") }}</span></p>
        <p><span class="section">{{ _("Equipment:") }} </span><span class="equipment">{{ _("None.") }}</span></p>
        <div id="warn"><p><span class="section">{{ _("⚠️ Warnings:") }} </span></p><ul class="warnings"></ul></div>
      </div>
    </div>

    <div id="main_box">
      <form id="type">
        <fieldset>
          <input name="type" type="radio" onchange="update()" id="minion" value="minion"><label for="minion">{{ _("Minion") }}</label>
          <input name="type" type="radio" onchange="update()" id="rival" value="rival" checked><label for="rival">{{ _("Rival") }}</label>
          <input name="type" type="radio" onchange="update()" id="nemesis" value="nemesis"><label for="nemesis">{{ _("Nemesis") }}</label>
          <div id="filler"></div>
          <input name="name" type="text" placeholder="{{ _("Name") }}" oninput="update_name()">
          <div id="filler-locale"></div>
          <select name="locale" onchange="change_locale()">
            {% for lc in locales %} <option value="{{lc}}" {% if lc == selected_locale %}selected{% endif %}>{{lc|flag}}</option> {% endfor %}
          </select>
        </fieldset>

        <fieldset>
          <legend>{{ _("Characteristic arrays") }}</legend>
          <table>
            <tr>
              <th></th>
              <th>{{ _("Name") }}</th>
              <th>{{ _("Caracteristics") }}</th>
              <th colspan="6">{{ _("Power levels") }}</th>
              <th>{{ _("Examples") }}</th>
            </tr>
            {% for array in caracteristics %}
            {% set loop_outer, id = loop, "caracteristics" ~ loop.index0 %}
            <tr onclick="click_row('{{id}}')">
              <td class="select"><input type="radio" id="caracteristics{{loop.index0}}" name="caracteristics" onchange="update()" value="{{loop.index0}}"></td>
              <td><label for="caracteristics{{loop.index0}}">{{array['name']}}</label></td>
              <td><label for="caracteristics{{loop.index0}}">{% for name, value in array['caracs'].items() %} {{name|capitalize ~ ': ' ~ value}}{{", " if not loop.last}}{% endfor %}</label></td>
              {% for name, value in array['power_level'].items() %}<td class="icon"><label for="{{id}}"><img src="static/{{name}}.svg" /></label></td>
              <td class="level"><label for="{{id}}">{{value}}</label></td>{% endfor %} 
              <td><label for="{{id}}">{{array['ex']}}</label></td>
            </tr>
            {% endfor %}
          </table>

        </fieldset>

        <fieldset>
          <legend>{{ _("Soak, defense, and wound and strain thresholds") }}</legend>
          <table>
            <tr>
              <th></th>
              <th>{{ _("Name") }}</th>
              <th>{{ _("Derived attribute") }}</th>
              <th colspan="6">{{ _("Power levels") }}</th>
              <th>{{ _("Examples") }}</th>
            </tr> 
            {% for array in defense %}
            {% set loop_outer, id = loop, "defense" ~ loop.index0 %}
            <tr onclick="click_row('{{id}}')">
              <td class="select"><input type="checkbox" id="defense{{loop.index0}}" name="defense" onchange="update()" value="{{loop.index0}}"></td>
              <td><label for="defense{{loop.index0}}">{{array['name']}}</label></td>
              <td><label for="defense{{loop.index0}}">
                  {% for name, value in array['defense'].items() %}{{'{:+} '.format(value) ~ name}}{{", " if not loop.last}}{% endfor %}
                </label></td> 
                {% for name, value in array['power_level'].items() %}<td class="icon"><label for="defense{{loop_outer.index0}}"><img src="static/{{name}}.svg" /></label></td>
                <td class="level"><label for="defense{{loop_outer.index0}}">{{value}}</label></td>{% endfor %} 
                <td><label for="defense{{loop.index0}}">{{array['ex']}}</label></td>
            </tr>
            {% endfor %}
          </table>
        </fieldset>

        <fieldset>
          <legend>{{ _("Skill packages") }}</legend>
          <table>
            <tr>
              <th></th>
              <th>{{ _("Name") }}</th>
              <th>{{ _("Skills") }}</th>
              <th colspan="6">{{ _("Power levels") }}</th>
            </tr>

            {% for array in skills %}
            {% set loop_outer, id = loop, "skills" ~ loop.index0 %}
            <tr onclick="click_row('{{id}}')">
              <td class="select"><input type="checkbox" id="skills{{loop.index0}}" name="skills" onchange="update()" value="{{loop.index0}}"></td>
              <td><label for="skills{{loop.index0}}">{{array['name']}}</label></td>
              <td><label for="skills{{loop.index0}}">
                  {% for name, value in array['skills'].items() %}{{name|capitalize ~ ': ' ~ value}}{{", " if not loop.last}}{% endfor %}
                </label></td> 
                {% for name, value in array['power_level'].items() %}<td class="icon"><label for="skills{{loop_outer.index0}}"><img src="static/{{name}}.svg" /></label></td><td class="level"><label for="skills{{loop_outer.index0}}">{{value}}</label></td>{% endfor %} 
            </tr>
            {% endfor %}
          </table>
        </fieldset>

        <fieldset>
          <legend>{{ _("Adversary talents") }}</legend>
          <table>
            <tr>
              <th></th>
              <th>{{ _("Talent") }}</th>
              <th>{{ _("Description") }}</th>
              <th colspan="6">{{ _("Power levels") }}</th>
            </tr>

            {% for array in talents %}
            {% set loop_outer, id = loop, "talents" ~ loop.index0 %}

            <tr onclick="click_row('{{id}}')">
              <td class="select"><input type="checkbox" id="talents{{loop.index0}}" name="talents" onchange="update()" value="{{loop.index0}}"></td>
              <td><label for="talents{{loop.index0}}">{{array['talent']}}</label></td>
              <td><label for="talents{{loop.index0}}">{{array['desc']}}</label></td>
              {% for name, value in array['power_level'].items() %}<td class="icon"><label for="talents{{loop_outer.index0}}"><img src="static/{{name}}.svg" /></label></td><td class="level"><label for="talents{{loop_outer.index0}}">{{value}}</label></td>{% endfor %} 
            </tr>
            {% endfor %}
          </table>
        </fieldset>
        <fieldset>
          <legend>{{ _("Adversary special abilities") }}</legend>
          <table>
            <tr>
              <th></th>
              <th>{{ _("Special ability") }}</th>
              <th>{{ _("Description") }}</th>
              <th colspan="6">{{ _("Power levels") }}</th>
              <th>{{ _("Examples") }}</th>
            </tr>

            {% for array in abilities %}
            {% set loop_outer, id = loop, "abilities" ~ loop.index0 %}
            <tr onclick="click_row('{{id}}')">
              <td class="select"><input type="checkbox" id="abilities{{loop.index0}}" name="abilities" onchange="update()" value="{{loop.index0}}"></td>
              <td><label for="abilities{{loop.index0}}">{{array['ability']}}</label></td>
              <td><label for="abilities{{loop.index0}}">{{array['desc']}}</label></td>
              {% for name, value in array['power_level'].items() %}<td class="icon"><label for="talents{{loop_outer.index0}}"><img src="static/{{name}}.svg" /></label></td><td class="level"><label for="abilities{{loop_outer.index0}}">{{value}}</label></td>{% endfor %} 
              <td><label for="abilities{{loop.index0}}">{{array['ex']}}</label></td>
            </tr>
            {% endfor %}
          </table>
        </fieldset>
        <fieldset>
          <legend>{{ _("Equipment arrays") }}</legend>
          <table>
            <thead>
              <tr>
                <th rowspan=2></th>
                <th rowspan=2>{{ _("Name") }}</th>
                <th rowspan=2>{{ _("Description") }}</th>
                <th rowspan=1>{{ _("Weapons") }}</th>
                <th rowspan=2 colspan="6">{{ _("Power levels") }}</th>
              </tr>
              <tr>
                <th rowspan=1>{{ _("Equipment") }}</th>
              </tr>
            </thead>
            {% for array in equipment %}
            {% set loop_outer, id = loop, 'equipment' ~ loop.index0 %}
            <tbody class="row" onclick="click_row('{{id}}');">
              <tr>
                <td rowspan=2 class="select"><input type="radio" id="equipment{{loop.index0}}" name="equipment" onchange="update()" value="{{loop.index0}}"></td>
                <td rowspan=2><label for="equipment{{loop.index0}}">{{array['name']}}</label></td>
                <td rowspan=2><label for="equipment{{loop.index0}}">{{array['desc']}}</label></td>
                <td rowspan=1><label for="equipment{{loop.index0}}">{{array['weapons']}}</label></td>
                {% for name, value in array['power_level'].items() %}<td rowspan=2 class="icon"><label for="equipment{{loop_outer.index0}}"><img src="static/{{name}}.svg" /></label></td><td rowspan=2 class="level"><label for="equipment{{loop_outer.index0}}">{{value}}</label></td>{% endfor %} 
              </tr>
              <tr>
                <td rowspan=1><label for="equipment{{loop.index0}}">{{array['equipment']}}</label></td>
              </tr>
            </tbody>
            {% endfor %}
          </table>

        </fieldset>

      </form>
        <fieldset id="save">
          <button onclick="toogle_template()" type="button">Wiki template</button>
          <textarea readonly> </textarea>
          <button onclick="copy()" type="button" id="copy">Copy to clipboard</button>
        </fieldset>
    </div>
  </article>
  <footer><a href="https://github.com/ytterbium/genesys-adversary-generator">Source code (license GPLv2+)</a> 
    <br>
    Data and descriptions coming from FFG books (Expanded Player Guide and Core Rulebook)</footer>
  

  <script type="text/javascript">
    const json_data = '{{data|safe}}';
  </script>
  <script type="text/javascript" src="static/script.js"></script>
</body>


